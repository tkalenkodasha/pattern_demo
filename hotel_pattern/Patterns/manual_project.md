# Руководство пользователя и проектная документация системы «[Название системы]»

## Введение

**Название системы**: [Например, «HotelManager» для информационной системы гостиницы]  
**Версия**: 1.0  
**Предметная область**: [Например, «Управление гостиничным бизнесом»]  
**Описание**: Документ описывает функциональное назначение системы, инструкции по её использованию, перечень методов с параметрами, технические требования и обработку ошибок. Он предназначен для пользователей (администраторов, сотрудников, гостей) и разработчиков, поддерживающих систему.

_Пример_:  
Название системы: HotelManager  
Версия: 1.0  
Предметная область: Управление гостиничным бизнесом  
Описание: Система HotelManager автоматизирует процессы управления гостиницей, включая авторизацию пользователей, смену паролей, управление учетными записями и бронированиями.

## 1. Назначение системы

Система предназначена для автоматизации процессов в предметной области [указать область]. Основные возможности:

- **Авторизация пользователей**: Обеспечивает безопасный вход для пользователей с различными ролями.
- **Управление учетными записями**: Позволяет добавлять, редактировать и разблокировать пользователей.
- **Обработка данных**: [Указать, например, управление бронированиями, номерами или другими сущностями].

Система обеспечивает безопасное хранение данных, интуитивно понятный интерфейс и обработку ошибок для повышения удобства использования.

_Пример_:  
Система HotelManager предназначена для автоматизации управления гостиницей. Основные возможности:

- **Авторизация пользователей**: Безопасный вход для ролей «Администратор», «Руководитель», «Пользователь» и «Гость».
- **Смена пароля**: Обязательная смена пароля при первом входе или по необходимости.
- **Управление пользователями**: Редактирование учетных записей администратором, включая снятие блокировки.

## 2. Технические требования

### 2.1. Системные требования

_Пример_:

- Операционная система: Windows 10 или выше.
- Среда разработки: Visual Studio 2022.
- СУБД: SQLite.
- Дополнительные библиотеки: .NET Framework 4.8, ADO.NET для работы с `HotelDataSet`.

### 2.2. Структура проекта

Система организована по принципу единственной ответственности, каждая сущность представлена отдельным классом или компонентом. Основные директории и файлы:
_Пример_:
- **Forms/Auth.cs**: Форма авторизации пользователей.
- **Forms/ChangePassword.cs**: Форма для смены пароля.
- **Forms/MainForm.cs**: Главная форма с меню для разных ролей.
- **UserControls/UserControl1.cs**: Компонент для управления учетными записями.
- **HotelDataSet.xsd**: Aсхема базы данных и адаптеры для работы с таблицами `users`, `roles`.

## 3. Инструкция по использованию

### 3.1. Запуск системы
_Пример_:

1. Установите Visual Studio 2022 и .NET Framework 4.8.
2. Откройте файл `HotelManager.sln` в Visual Studio.
3. Нажмите «Пуск» или F5 для запуска.
4. Откроется форма `Auth`, где нужно ввести логин и пароль или выбрать режим «Гость».

### 3.2. Основные функции

**Функция 1: Авторизация**

- **Описание**: Позволяет пользователю войти в систему, указав логин и пароль. Проверяется существование пользователя, корректность пароля, статус блокировки и дата последнего входа.
- **Как выполнить**:
  1. В форме авторизации введите логин в поле «Логин» и пароль в поле «Пароль».
  2. Нажмите кнопку «Войти».
  3. При неверных данных отобразится сообщение: «введите логин и пароль!», «пользователь не найден!» или «Неверный пароль! осталось попыток: {число}».
  4. После 3 неверных попыток: «превышен лимит попыток входа! ваша учетная запись заблокирована!».
  5. Если последний вход был более 30 дней назад: «последний вход был более 30 дней назад, поэтому Ваша учетная запись заблокирована!».
  6. При успешной авторизации: «вы успешно авторизовались!» и открывается главная форма.


**Функция 2: Смена пароля**

- **Описание**: Позволяет пользователю изменить пароль, если он использует стандартный пароль («new_password») или по необходимости.
- **Как выполнить**:
  1. При первом входе с паролем «new_password» открывается форма смены пароля.
  2. Введите текущий пароль, новый пароль и подтверждение нового пароля.
  3. Нажмите кнопку «Изменить».
  4. При ошибке отобразится: «Заполните все поля!», «неверный текущий пароль!» или «новый пароль не совпадает с подтверждением!».
  5. При успехе: «пароль успешно изменен!» и форма закрывается.

**Функция 3: Управление пользователями (для администратора)**

- **Описание**: Позволяет администратору просматривать, редактировать и добавлять учетные записи пользователей.
- **Как выполнить**:
  1. Войдите как администратор (role_id = 1).
  2. В меню главной формы выберите «users».
  3. Откроется таблица с данными пользователей (логин, пароль, роль, статус блокировки).
  4. Отредактируйте данные и нажмите «Сохранить».
  5. Для добавления нового пользователя [указать шаги, если реализовано].
  6. Нажмите «Обновить» для синхронизации с базой данных.


## 4. Используемые методы

### Класс `Auth` (Форма авторизации)

1. **loginButton_Click**

   - **Описание**: Проверяет логин, пароль, статус блокировки и дату последнего входа. Управляет попытками входа, блокирует учетную запись после 3 неверных попыток, открывает форму смены пароля или главную форму.
   - **Параметры**:
     - `sender` (object): Объект, вызвавший событие (кнопка).
     - `e` (EventArgs): Аргументы события.
   - **Возвращаемое значение**: Нет.
   - **Пример вызова**: Автоматически вызывается при нажатии кнопки «Войти».

2. **guestLabel_Click**
   - **Описание**: Открывает главную форму для роли «Гость» (role_id = 4) с ограниченным функционалом.
   - **Параметры**:
     - `sender` (object): Объект, вызвавший событие (метка).
     - `e` (EventArgs): Аргументы события.
   - **Возвращаемое значение**: Нет.
   - **Пример вызова**: Автоматически вызывается при клике на метку «Гость».

### Класс `ChangePassword` (Форма смены пароля)

1. **changeButton_Click**
   - **Описание**: Проверяет текущий пароль, совпадение нового пароля с подтверждением и обновляет пароль в базе данных.
   - **Параметры**:
     - `sender` (object): Объект, вызвавший событие (кнопка).
     - `e` (EventArgs): Аргументы события.
   - **Возвращаемое значение**: Нет.
   - **Пример вызова**: Автоматически вызывается при нажатии кнопки «Изменить».

### Класс `MainForm` (Главная форма)

1. **usersToolStripMenuItem_Click**

   - **Описание**: Открывает компонент управления пользователями (`UserControl1`) в панели контента.
   - **Параметры**:
     - `sender` (object): Объект, вызвавший событие (пункт меню).
     - `e` (EventArgs): Аргументы события.
   - **Возвращаемое значение**: Нет.
   - **Пример вызова**: Автоматически вызывается при выборе пункта меню «users».

2. **bookingsToolStripMenuItem_Click**
   - **Описание**: Открывает компонент управления бронированиями (`BookingsUserControl`) в панели контента.
   - **Параметры**:
     - `sender` (object): Объект, вызвавший событие (пункт меню).
     - `e` (EventArgs): Аргументы события.
   - **Возвращаемое значение**: Нет.
   - **Пример вызова**: Автоматически вызывается при выборе пункта меню «bookings».

### Класс `UserControl1` (Компонент управления пользователями)

1. **saveToolStripButton_Click**

   - **Описание**: Сохраняет изменения в данных пользователей, отображая количество сохраненных строк или сообщение об ошибке.
   - **Параметры**:
     - `sender` (object): Объект, вызвавший событие (кнопка).
     - `e` (EventArgs): Аргументы события.
   - **Возвращаемое значение**: Нет.
   - **Пример вызова**: Автоматически вызывается при нажатии кнопки «Сохранить».

2. **refreshToolStripButton_Click**
   - **Описание**: Обновляет данные пользователей и ролей из базы данных.
   - **Параметры**:
     - `sender` (object): Объект, вызвавший событие (кнопка).
     - `e` (EventArgs): Аргументы события.
   - **Возвращаемое значение**: Нет.
   - **Пример вызова**: Автоматически вызывается при нажатии кнопки «Обновить».

## 5. Обработка ошибок

- Все формы используют `MessageBox` для отображения ошибок и уведомлений.
- Ошибки ввода данных (пустые поля, неверный пароль, дублирование логина) сопровождаются информативными сообщениями.
- Системные ошибки обрабатываются через `try-catch`, предотвращая аварийное завершение приложения.

_Пример_:

- При неверном пароле: «Неверный пароль! осталось попыток: {число}».
- При попытке входа с заблокированной учетной записью: «Ваша учетная запись заблокирована!».
- При ошибке сохранения данных: «Ошибка при обновлении: {описание ошибки}».

## 6. Техподдержка

По вопросам использования системы или ошибок обращайтесь к администратору системы:

- **Электронная почта**: [email@example.com].
- **Телефон**: [указать номер].

